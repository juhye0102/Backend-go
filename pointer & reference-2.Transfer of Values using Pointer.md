# 값 전달

------

- Go에서의 값 전달 방식

  - Go에서는 함수나 메서드를 호출할 때 매개변수 값을 복사해서 함수나 메서드 내부로 전달함.
  - 함수나 메서드 내부에서는 전달된 매개변수의 원본 값을 변경할 수 없음. → 함수나 메서드 내에서 원본 값을 변경하려면 포인터를 사용해야 함.

- 포인터 변수의 크기

  - 포인터 값의 크기는 64비트 머신에서는 8바이트, 32비트 머신에서는 4바이트임.
  - 함수나 메서드에 포인터를 전달하면 실제 값에 상관없이 아주 적은 양의 값만 전달됨.

- Go에서의 포인터 사용

  - Go에서 불, 숫자 타입은 물론 문자열까지도 값을 복사하여 전달할 때 시스템에 부담을 주지 않음.
  - 길이가 큰 배열은 함수나 메서드로 전달하면 시스템에 부담이 많이 가게 됨. → 길이가 클 경우 배열 대신 슬라이스를 사용하여 참조가 전달되게 하면 부담을 줄일 수 있음.

  ```go
  func main() {
  		// numbers를 슬라이스로 선언하여 참조를 전달하면 시스템의 부담을 줄일 수 있음
  		numbers := []int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
  		multiply(numbers, 5)
  		fmt.println(numbers)
  }
  
  func multiply(numbers []int, factor int) {
  		fot i := range numbers {
  				numbers[i] *= factor
  		}
  }
  ```

  - 크기가 큰 구조체 또한 전달할 때 값 전체를 복사하여 전달하므로 시스템에 부담을 많이 줌. → 포인터로 전달하면 시스템에 부담을 많이 줄일 수 있음.

  ```go
  type rect struct {
  		x0, y0, x1, y1 int
  		color.RGBA
  }
  
  func main() {
  		rect := rect{2, 4, 10, 20, color.RGBA{0xFF, 0, 0, 0xFF}}
  		// rect 구조체의 주소 값을 전달하여 구조체 전체 값을 복사할 필요가 없어짐.
  		resize(&rect, 10, 10)
  		fmt.Println(rect)
  }
  
  func resize(rect *rect, width, height int) {
  		(*rect).x1 += width
  		rect.y1 += height
  }
  ```

- 참조

  - 함수나 메서드의 반환 값이 많을 경우에는 슬라이스나 반환 값을 여러개 정의한 구조체의 포인터를 반환하는 것이 좋음.
  - 참조가 아닌 값을 반환할 때 반환 값은 세 개 이하로 정의하는 것을 권장함.